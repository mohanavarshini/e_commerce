<!doctype html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
   <link rel="stylesheet" href="style.css">
   <title>Online Shopping</title>
</head>
<body>
    <div class="heading mt-2">
        <h1>ADD PRODUCT DETAILS</h1>
    </div>
    <section id="index" class="index">
        <div class="container pt-5">
            <div class="row">
                <div class="col-sm-12 col-lg-6 col-md-12 image">               
                    <label for="productImg">Product Image:</label><span class="star">*</span>
                    <input type="file" name="productImg" id="productImg" onchange="validateImg(event)" required>
                    <img src=""  alt="" id="displayImg" width="100%" height=""  class="mt-5"/>
                    <p style="display: none;" id="imgError">Please choose the image</p>
                </div>
                <div class="col-sm-12 col-lg-6 col-md-12 mb-5 Product">
                    <form>
                        <!-- PRODUCT NAME -->
                        <div class="productName mt-3">
                            <label for="productName">Product Name :</label><span class="star">*</span>
                            <input type="text" placeholder="Enter Product Name" id="name" class=" ml-5" style="position: relative; left: 37px; " >
                            <p style="display: none;" id="nameError">Please enter the product name</p>
                        </div>
                        <!-- PRODUCT DESCRIPTION -->
                        <div class="productDesc mt-3">
                            <label for="productDesc">Product Description :</label><span class="star">*</span>
                            <textarea type="text"id="siteDescription"  name="site-description" class="ml-4" required cols="27" rows="6" style="position: relative; left: 27px;"></textarea>
                            <p style="display: none;" id="descriptionError">Please enter the product description</p>
                        </div>
                        <!-- PRODUCT AMOUNT -->
                        <div class="productAmount mt-3">
                            <div class="originalPrice">
                                <label for="">Original Price :</label> <span class="star">*</span>
                                ₹<input type="text" placeholder="Enter original amount" id="originalPrice" class="ml-4 " style="position: relative; left: 27px;" >
                                <p style="display: none;" id="originalPriceError">please enter the original price</p>
                            </div>
                            <div class="discount mt-3">
                                <label for="discount">Discount :</label> <span class="star">*</span>
                                <input type="text" id="discountUser" placeholder="Enter the Discount" class="ml-5" style="position: relative; left: 27px;">
                                <p style="display: none;" id="discountError">Please Enter the Discount</p>
                            </div>
                            <div class="discountFormat mt-3">
                                <label for="discountFormat">Discount Format :</label>
                                <select name="" id="discount" onchange="validateDiscount(event)" class="ml-2" style="position: relative; left: 27px;">
                                    <option value="">Select Discount Format</option>
                                    <option value="Percentage%">Percentage</option>
                                    <option value="Flat">Flat</option>
                                </select>
                            </div>
                            <div class="salesPrice mt-3">
                                <label for="salesPrice">Sales Price :</label><span class="star">*</span>
                                ₹<input type="text" readonly name="priceSales" id="priceSales" class="ml-5" style="position: relative; left: 27px;">
                            </div>
                            <div class="maxQuantity mt-3">
                                <label for="salesPrice">Maximum Quantity :</label><span class="star">*</span>
                                <input type="number" id="maxQuantity"  name="maxQuantity" class="" required style="position: relative; left: 27px;">
                                <p style="display: none;" id="quantityError">Please enter the quantity</p>
                            </div>
                        </div>
                        <!-- BUTTON -->
                        <div class="addProduct mb-5 mt-3" style="text-align: center;">
                            <button type="button" class="btn btn-success button mt-5" onclick="validateProduct(),nextPage(event)" >ADD PRODUCT</button>                         
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.6/dist/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
</body>
<script>

function validateDiscount(event){
    // PRODUCT NAME
    var productName = document.getElementById('name').value;
    localStorage.setItem('productName',productName);
    // PRODUCT DESCRIPTION
    var productDescription = document.getElementById('siteDescription').value;
    localStorage.setItem('productDescription',productDescription);
    // ORIGINAL PRICE
    var originalPrice = document.getElementById('originalPrice').value;
    localStorage.setItem('originalPrice',originalPrice);
    // DISCOUNT
    var Discount = event.target.value;
    var userDiscount = document.getElementById('discountUser').value;
    localStorage.setItem('userDiscount',userDiscount);
    var discountFormat = document.getElementById('discount').value;
    localStorage.setItem('discountFormat',discountFormat);
    // PRICE SALES
    var salesprice = document.getElementById('priceSales').value;
    // MAX QUANTITY
    var maxQuantity = document.getElementById('maxQuantity').value;
    localStorage.setItem('maxQuantity',maxQuantity);
    // DISCOUNT
    var userDiscountMul = userDiscount/100;
    var userDiscountSub = originalPrice-userDiscount;
    console.log(salesPrice);
    
    if(originalPrice){
        document.getElementById('originalPriceError').style="display:none;";
    }
    else{
        document.getElementById('originalPriceError').style="display:block;color:red;";
    }
    if(userDiscount){
        document.getElementById('discountError').style="display:none;";
    }
    else{
        document.getElementById('discountError').style="display:block;color:red;";
    }
    if(productDescription){
        document.getElementById('descriptionError').style="display:none;";
    }
    else{
        document.getElementById('descriptionError').style="display:block;color:red;";
    }
    if(productName){
        document.getElementById('nameError').style="display:none;";
    }
    else{
        document.getElementById('nameError').style="display:block;color:red;";
    }
   
   
    if (Discount == 'Percentage%') {
        var salesPrice =originalPrice-originalPrice*userDiscountMul;
        document.getElementById('priceSales').value =salesPrice;
        localStorage.setItem('priceSales',salesPrice);      
    }
    else{
        var salesPrice = userDiscountSub;
        document.getElementById('priceSales').value =salesPrice;
        localStorage.setItem('priceSales',salesPrice);
    }
    var productDescription = document.getElementById('siteDescription').value;
    var productDescription1 = productDescription.substr(0,100)+"...";
    document.getElementById('siteDescription').value = productDescription1;   
}

function validateImg(event)
{
    console.log('event --- ',event.target.files[0]);
    var reader = new FileReader(); 
    console.log(reader.result);
    reader.onload = function(){
        var output = document.getElementById('displayImg');
        output.src = reader.result;        
        localStorage.setItem('productImgSrc', reader.result);
    };
    reader.readAsDataURL(event.target.files[0]);
}

function validateProduct(){
    var productName = document.getElementById('name').value;
    if(productName == " "){
        document.getElementById('nameError').style="display:none;";
    }
    else{
        document.getElementById('nameError').style="display:block;color:red;";
    }
    // ORIGINAL PRICE
    var originalPrice = document.getElementById('originalPrice').value;
    // DISCOUNT
    var Discount = event.target.value;
    var userDiscount = document.getElementById('discountUser').value;
    var discountFormat = document.getElementById('discount').value;
    // SALES PRICE
    var salesprice = document.getElementById('priceSales').value;
    // MAX QUANTITY
    var maxQuantity = document.getElementById('maxQuantity').value;
    localStorage.setItem('maxQuantity',maxQuantity);
    // IMAGE
    var image = document.getElementById('productImg').value;
    // PRODUCT DESCRIPTION
    var productDescription = document.getElementById('siteDescription').value;
 
    if(originalPrice){
        document.getElementById('originalPriceError').style="display:none;";
    }
    else{
        document.getElementById('originalPriceError').style="display:block;color:red;";
    }
    if(userDiscount){
        document.getElementById('discountError').style="display:none;";
    }
    else{
        document.getElementById('discountError').style="display:block;color:red;";
    }
    if(productDescription){
        document.getElementById('descriptionError').style="display:none;";
    }
    else{
        document.getElementById('descriptionError').style="display:block;color:red;";
    }
    if(productName){
        document.getElementById('nameError').style="display:none;";  
    }
    else{
        document.getElementById('nameError').style="display:block;color:red;";
    }
    if(maxQuantity){
        document.getElementById('quantityError').style="display:none;";
    }
    else{
        document.getElementById('quantityError').style="display:block;color:red;";
    }
    if(image){
        document.getElementById('imgError').style="display:none;";
    }
    else{
        document.getElementById('imgError').style="display:block;color:red;";
    }    
}
function nextPage(){ 
    if (document.getElementById("name").value && document.getElementById("siteDescription").value && document.getElementById("originalPrice").value && document.getElementById("priceSales").value && document.getElementById("maxQuantity").value && document.getElementById("productImg").value && document.getElementById('discountUser').value) {
            window.location.href = "productinfo.html";
    }
}


  </script>
</html>